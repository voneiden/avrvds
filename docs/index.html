<html lang="en">
<head>
    <title>AVRVDS (PROTO)</title>
    <script src="avrvds.js"></script>
    <link rel="stylesheet" href="chip-view.css">
</head>
<body>
<div id="elm-node"></div>
<script>
  const visibleModulesKey = 'avrvds-visibleModules';

  let visibleModules = localStorage.getItem(visibleModulesKey);
  const app = Elm.Main.init({
    flags: {
      root: '/avrvds/',
      visibleModules: visibleModules ? JSON.parse(visibleModules) : null
    }
  })
  console.log("GOT APP", app, app.ports)
  app.ports.storeVisibleModules.subscribe(function (visibleModules) {
    localStorage.setItem(visibleModulesKey, JSON.stringify(visibleModules))
  });

</script>
</body>
</html>
